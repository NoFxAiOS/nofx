# 🚀 NOFX - 快速开始指南

## ⚡ 超级快速启动

### 当前系统状态

✅ **已就绪**:
- Python 3.12.3 (已安装)
- 经济日历数据库 (2.1MB, 761个事件)
- 经济日历数据采集脚本 (已就绪)
- 代码集成完成 (decision/engine.go, main.go)

⚠️ **需要安装**:
- Go 1.21+ (编译后端必需)

---

## 📍 你在这里

```
当前位置: /mnt/d/.projects/nofx
系统: WSL Ubuntu
```

---

## 🎯 三步启动(最简单)

### 步骤1: 安装Go环境

```bash
# 下载Go 1.21.6
wget https://go.dev/dl/go1.21.6.linux-amd64.tar.gz

# 解压安装
sudo tar -C /usr/local -xzf go1.21.6.linux-amd64.tar.gz

# 添加到PATH
echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc
source ~/.bashrc

# 验证
go version
```

### 步骤2: 运行一键启动脚本

```bash
cd /mnt/d/.projects/nofx
./run_system.sh
```

**就这么简单!** 脚本会自动:
- ✅ 检查环境
- ✅ 创建配置文件
- ✅ 安装依赖
- ✅ 编译程序
- ✅ 启动系统(包括经济日历)

### 步骤3: 访问系统

打开浏览器: **http://localhost:3000**

---

## 🔧 环境变量配置位置

### 主要配置文件

| 文件 | 位置 | 用途 |
|------|------|------|
| `config.json` | 项目根目录 | 系统配置(杠杆、币种、端口等) |
| `.env` | 项目根目录 | Docker环境变量(端口、时区) |
| `world/经济日历/.env` | 经济日历目录 | 代理配置(可选) |

### 快速配置

**如果 config.json 不存在,脚本会自动从模板创建!**

手动创建:
```bash
cp config.json.example config.json
nano config.json  # 编辑配置
```

配置说明:
```json
{
  "admin_mode": true,              // 管理员模式(无需登录)
  "api_server_port": 8080,         // API端口
  "leverage": {
    "btc_eth_leverage": 5,         // BTC/ETH杠杆
    "altcoin_leverage": 5          // 山寨币杠杆
  },
  "use_default_coins": true,       // 使用默认币种
  "default_coins": [
    "BTCUSDT", "ETHUSDT", "SOLUSDT"  // 交易币种列表
  ]
}
```

---

## 📊 验证系统运行

### 1. 检查经济日历数据库

```bash
# 使用Python查询
python3 << 'EOF'
import sqlite3
db = sqlite3.connect('economic_calendar.db')
cursor = db.cursor()
cursor.execute("SELECT COUNT(*) FROM events WHERE importance = '高'")
print(f"✓ 高重要性事件: {cursor.fetchone()[0]}")
db.close()
EOF
```

**预期输出**: `✓ 高重要性事件: 322`

### 2. 查看NOFX启动日志

启动后应该看到:
```
╔════════════════════════════════════════════════════════════╗
║    🤖 AI多模型交易系统 - 支持 DeepSeek & Qwen            ║
╚════════════════════════════════════════════════════════════╝

🚀 启动经济日历数据采集服务...
✓ 经济日历服务已启动 (PID: xxxxx, 日志: world/经济日历/calendar.log)
✓ 配置数据库初始化成功
🌐 API服务器启动在 http://localhost:8080
```

### 3. 检查经济日历服务日志

```bash
tail -f world/经济日历/calendar.log
```

应该看到:
```
[2025-11-02 14:45:00] [INFO] 经济日历超精简版 - 启动中...
[2025-11-02 14:45:05] [INFO] 获取到 245 条事件
[2025-11-02 14:45:05] [INFO] 数据库已更新: 245 条
```

---

## 🛠️ 手动运行(开发模式)

如果你想分步运行:

```bash
# 1. 安装依赖
go get github.com/mattn/go-sqlite3
go mod download

cd world/经济日历
pip install -r requirements.txt
cd ../..

# 2. 编译
go build -o nofx

# 3. 启动(会自动启动经济日历)
./nofx
```

---

## 📁 重要文件位置

```
/mnt/d/.projects/nofx/
├── run_system.sh                  ✅ 一键启动脚本(新建)
├── config.json                    ⚠️ 需要创建
├── config.json.example            ✅ 配置模板
├── .env                           ✅ Docker环境变量
├── nofx                           ⚠️ 编译后生成
├── economic_calendar.db           ✅ 经济日历数据库(2.1MB)
│
├── main.go                        ✅ 已修改(自动启动经济日历)
├── decision/engine.go             ✅ 已修改(读取经济日历)
│
├── world/经济日历/
│   ├── economic_calendar_minimal.py  ✅ 数据采集脚本
│   ├── requirements.txt              ✅ Python依赖
│   ├── .env                          ⚠️ 可选(代理配置)
│   └── calendar.log                  ⚠️ 运行时生成
│
└── 文档/
    ├── ECONOMIC_CALENDAR_INTEGRATION.md  # 技术文档
    ├── 经济日历集成使用指南.md            # 用户手册
    ├── 环境配置和运行指南.md              # 环境配置
    └── 快速开始.md                       # 本文档
```

---

## 🎯 核心命令

```bash
# 一键启动(推荐)
./run_system.sh

# 手动编译
go build -o nofx

# 手动运行
./nofx

# 查看经济日历日志
tail -f world/经济日历/calendar.log

# 查询经济日历数据
python3 -c "import sqlite3; db = sqlite3.connect('economic_calendar.db'); print(db.execute('SELECT COUNT(*) FROM events').fetchone()[0])"

# 停止系统
# Ctrl+C 或 pkill -f nofx
```

---

## 🐛 常见问题速查

### Q1: Go未安装
```bash
wget https://go.dev/dl/go1.21.6.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.21.6.linux-amd64.tar.gz
export PATH=$PATH:/usr/local/go/bin
```

### Q2: 端口被占用
```bash
# 检查端口
lsof -i :8080

# 修改端口
nano config.json  # 改api_server_port
```

### Q3: SQLite驱动安装失败
```bash
sudo apt-get install build-essential libsqlite3-dev
go get github.com/mattn/go-sqlite3
```

### Q4: 经济日历服务未启动
```bash
# 检查Python
python3 --version

# 手动启动测试
cd world/经济日历
python3 economic_calendar_minimal.py --verbose
```

---

## 📚 完整文档

- **快速开始**: 本文档
- **技术文档**: `ECONOMIC_CALENDAR_INTEGRATION.md`
- **用户手册**: `经济日历集成使用指南.md`
- **环境配置**: `环境配置和运行指南.md`
- **项目说明**: `README.md`

---

## ✅ 系统集成功能

### 经济日历 + AI交易

**自动化流程**:

```
1. Python服务(后台运行)
   ↓
   每5分钟抓取cn.investing.com
   ↓
   写入economic_calendar.db

2. NOFX决策引擎
   ↓
   读取未来24小时高重要性事件
   ↓
   展示在AI Prompt中

3. AI自动调整策略
   ↓
   - 重要事件前避免开仓
   - 降低杠杆倍数
   - 放宽止损范围
```

**AI看到的效果**:
```
## 📅 未来24小时重要经济事件

1. [2小时后] 美国核心PCE物价指数月率 (美国) - 高重要性
   预期: 0.3% | 前值: 0.4%

⚠️ 注意: 高影响事件可能导致市场剧烈波动,建议:
- 事件前1-2小时避免新开仓
- 适当降低杠杆或减少仓位
```

---

## 🎉 现在开始!

```bash
# 你只需要两个命令:

# 1. 安装Go(如果未安装)
wget https://go.dev/dl/go1.21.6.linux-amd64.tar.gz && \
sudo tar -C /usr/local -xzf go1.21.6.linux-amd64.tar.gz && \
echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc && \
source ~/.bashrc

# 2. 一键启动
./run_system.sh
```

**就这么简单!** 🚀

---

**最后更新**: 2025-11-02
**当前位置**: `/mnt/d/.projects/nofx`
**系统状态**: 代码已就绪,等待Go环境
